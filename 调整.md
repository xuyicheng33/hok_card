# ğŸ” **å…¨é¢æ£€æŸ¥æ‰€æœ‰ä¿®æ”¹**

è®©æˆ‘é€ä¸ªæ–‡ä»¶éªŒè¯ä¿®æ”¹çš„æ­£ç¡®æ€§ï¼š

## **1ï¸âƒ£ æ£€æŸ¥ cards_data.json**

âœ… **cards_data.json æ£€æŸ¥é€šè¿‡ï¼š**
- æœµè‰äºšï¼šattack=330, armor=325, æŠ€èƒ½=200æ²»ç–—, è¢«åŠ¨=è‡ªå·±+é˜Ÿå‹å„50
- å…¬å­™ç¦»ï¼šattack=575, dodge_rate=0.25, æŠ€èƒ½=30%æš´å‡», è¢«åŠ¨ä¸Šé™=25%

---

## **2ï¸âƒ£ æ£€æŸ¥ SkillCalculator.js**



âœ… **SkillCalculator.js æ£€æŸ¥é€šè¿‡ï¼š**
- æœµè‰äºšï¼šhealAmount = 200
- å…¬å­™ç¦»ï¼šcritRateBuff = 0.30 (30%)

---

## **3ï¸âƒ£ æ£€æŸ¥ BattleEngine.jsï¼ˆå…¬å­™ç¦»è¢«åŠ¨ï¼‰**

âœ… **BattleEngine.js æ£€æŸ¥é€šè¿‡ï¼š**
- Line 68: `target.attack += 10` âœ“ (é—ªé¿è§¦å‘+10æ”»å‡»ï¼ŒæŒ‰ä½ çš„è¦æ±‚ä¿æŒ)
- Line 77: `attacker.dodge_bonus < 0.25` âœ“ (é—ªé¿æˆé•¿ä¸Šé™25%)
- Line 79: `attacker.dodge_rate = 0.25 + attacker.dodge_bonus` âœ“ (åŸºç¡€é—ªé¿25%)

---

## **4ï¸âƒ£ æ£€æŸ¥ server.jsï¼ˆæœµè‰äºšè¢«åŠ¨ï¼‰**

âœ… **server.js æ£€æŸ¥é€šè¿‡ï¼š**
- Line 596: `healAmount = 50` âœ“
- Line 598-610: ä¸ºæœµè‰äºšè‡ªå·±æ¢å¤50ç‚¹ï¼Œæ»¡è¡€æº¢å‡ºè½¬æŠ¤ç›¾ âœ“
- Line 618-636: ä¸ºè¡€é‡æœ€ä½çš„é˜Ÿå‹ï¼ˆä¸åŒ…æ‹¬è‡ªå·±ï¼‰æ¢å¤50ç‚¹ âœ“
- Line 643-652: æ•°æ®ç»“æ„å®Œæ•´ï¼ˆself_heal, ally_heal, ally_nameç­‰ï¼‰âœ“

---

## **5ï¸âƒ£ æ£€æŸ¥ Card.gdï¼ˆå®¢æˆ·ç«¯ï¼‰**

âœ… **Card.gd æ£€æŸ¥é€šè¿‡ï¼š**
- Line 391: `heal(50, true)` âœ“ (ä¸ºæœµè‰äºšè‡ªå·±æ¢å¤50ç‚¹ï¼Œå…è®¸æº¢å‡ºè½¬æŠ¤ç›¾)

---

## **6ï¸âƒ£ æ£€æŸ¥ BattleManager.gdï¼ˆå®¢æˆ·ç«¯æœ¬åœ°æ¨¡å¼ï¼‰**

âœ… **BattleManager.gd æœ¬åœ°æ¨¡å¼æ£€æŸ¥é€šè¿‡ï¼š**
- Line 788: `card.trigger_duoliya_passive()` âœ“ (ä¸ºè‡ªå·±æ¢å¤50ç‚¹)
- Line 794-812: ä¸ºè¡€é‡æœ€ä½çš„é˜Ÿå‹ï¼ˆä¸åŒ…æ‹¬è‡ªå·±ï¼‰æ¢å¤50ç‚¹ âœ“
- Line 807: `lowest_hp_ally.heal(50, false)` âœ“ (é˜Ÿå‹ä¸æº¢å‡ºæŠ¤ç›¾)
- Line 820-829: æ•°æ®ç»“æ„å’Œä¿¡å·å®Œæ•´ âœ“

---

## **7ï¸âƒ£ æ£€æŸ¥ BattleManager.gdï¼ˆåœ¨çº¿æ¨¡å¼æ•°æ®å¤„ç†ï¼‰**

âœ… **BattleManager.gd åœ¨çº¿æ¨¡å¼æ£€æŸ¥é€šè¿‡ï¼š**
- Line 1483-1486: æ­£ç¡®è·å–æœåŠ¡å™¨æ•°æ®ï¼ˆself_heal, ally_heal, ally_nameï¼‰âœ“
- Line 1490-1501: æ­£ç¡®æ„å»ºæ¶ˆæ¯å­—ç¬¦ä¸² âœ“
- å®Œæ•´å¤„ç†æ‰€æœ‰æƒ…å†µï¼ˆè‡ªå·±æ¢å¤ã€æº¢å‡ºæŠ¤ç›¾ã€é˜Ÿå‹æ¢å¤ï¼‰âœ“

---

## **âœ… æœ€ç»ˆæ£€æŸ¥ç»“æœï¼šå…¨éƒ¨é€šè¿‡ï¼**

### **ğŸ“Š ä¿®æ”¹æ€»è§ˆï¼š**

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | çŠ¶æ€ |
|-----|---------|-----|
| **cards_data.json** | å…¬å­™ç¦»&æœµè‰äºšæ•°æ® | âœ… æ­£ç¡® |
| **SkillCalculator.js** | æœµè‰äºš200æ²»ç–—ï¼Œå…¬å­™ç¦»30%æš´å‡» | âœ… æ­£ç¡® |
| **BattleEngine.js** | å…¬å­™ç¦»è¢«åŠ¨é—ªé¿25%åŸºç¡€+25%ä¸Šé™ | âœ… æ­£ç¡® |
| **server.js** | æœµè‰äºšè¢«åŠ¨è‡ªå·±+é˜Ÿå‹å„50 | âœ… æ­£ç¡® |
| **Card.gd** | æœµè‰äºšè§¦å‘50ç‚¹æ²»ç–— | âœ… æ­£ç¡® |
| **BattleManager.gd** | æœ¬åœ°&åœ¨çº¿æ¨¡å¼å®Œæ•´é€»è¾‘ | âœ… æ­£ç¡® |

---

### **ğŸ¯ å…³é”®æ•°å€¼ç¡®è®¤ï¼š**

#### **å…¬å­™ç¦»ï¼š**
- âœ… åˆå§‹æ”»å‡»ï¼š575
- âœ… åŸºç¡€é—ªé¿ï¼š25%
- âœ… æŠ€èƒ½æš´å‡»åŠ æˆï¼š30%
- âœ… è¢«åŠ¨é—ªé¿è§¦å‘ï¼š+10æ”»å‡»ï¼ˆæŒ‰ä½ è¦æ±‚ä¿æŒï¼‰
- âœ… é—ªé¿æˆé•¿ä¸Šé™ï¼š25%ï¼ˆæ€»é—ªé¿50%ï¼‰

#### **æœµè‰äºšï¼š**
- âœ… æ”»å‡»åŠ›ï¼š330
- âœ… æŠ¤ç”²ï¼š325
- âœ… ä¸»åŠ¨æŠ€èƒ½ï¼š200ç‚¹æ²»ç–—
- âœ… è¢«åŠ¨æŠ€èƒ½ï¼šè‡ªå·±50ç‚¹ï¼ˆæº¢å‡ºè½¬æŠ¤ç›¾ï¼‰+ æœ€ä½è¡€é‡é˜Ÿå‹50ç‚¹

---

### **ğŸ” é€»è¾‘æµç¨‹éªŒè¯ï¼š**

#### **æœ¬åœ°æ¨¡å¼ï¼ˆLocalï¼‰ï¼š**
```
æœµè‰äºšå›åˆå¼€å§‹ 
  â†’ Card.gd: trigger_duoliya_passive() [è‡ªå·±+50]
  â†’ BattleManager.gd: æŸ¥æ‰¾æœ€ä½è¡€é‡é˜Ÿå‹
  â†’ é˜Ÿå‹.heal(50) [é˜Ÿå‹+50]
  â†’ å‘é€è¢«åŠ¨è§¦å‘ä¿¡å·
```

#### **åœ¨çº¿æ¨¡å¼ï¼ˆOnlineï¼‰ï¼š**
```
æœåŠ¡å™¨å›åˆåˆ‡æ¢
  â†’ server.js: æœµè‰äºšè‡ªå·±+50ï¼Œé˜Ÿå‹+50
  â†’ å¹¿æ’­ passive_results æ•°æ®
  â†’ å®¢æˆ·ç«¯æ¥æ”¶å¹¶åº”ç”¨
  â†’ BattleManager.gd: æ„å»ºæ¶ˆæ¯å¹¶æ˜¾ç¤º
```

---

## **âœ… ç¡®è®¤æ— è¯¯ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ï¼**

æ‰€æœ‰ä¿®æ”¹å·²ç»æ­£ç¡®å®æ–½ï¼Œæ•°æ®ä¸€è‡´æ€§å®Œæ•´ã€‚å»ºè®®æµ‹è¯•ï¼š

1. **å…¬å­™ç¦»å‰Šå¼±æµ‹è¯•**ï¼š
   - æ£€æŸ¥åŸºç¡€å±æ€§ï¼ˆ575æ”»å‡»ï¼Œ25%é—ªé¿ï¼‰
   - æŠ€èƒ½é‡Šæ”¾åæš´å‡»ç‡ï¼ˆ20%+30%=50%ï¼‰
   - é—ªé¿æˆåŠŸåæ”»å‡»åŠ æˆï¼ˆ+10ï¼‰
   - æœ€å¤§é—ªé¿ç‡ï¼ˆ25%+25%=50%ï¼‰

2. **æœµè‰äºšåŠ å¼ºæµ‹è¯•**ï¼š
   - ä¸»åŠ¨æŠ€èƒ½æ²»ç–—é‡ï¼ˆ200ï¼‰
   - å›åˆå¼€å§‹è‡ªå·±æ¢å¤50
   - åŒæ—¶ä¸ºè¡€é‡æœ€ä½é˜Ÿå‹æ¢å¤50
   - æ»¡è¡€æ—¶æº¢å‡ºè½¬æŠ¤ç›¾

éœ€è¦å¸®ä½ å¯åŠ¨æœåŠ¡å™¨æµ‹è¯•å—ï¼Ÿ ğŸš€